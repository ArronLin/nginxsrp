#summary Ningx代码研究.

= 概述 =

{{{ 
Nginx  ("engine x") 是一个高性能的 HTTP 和 反向代理 服务器，也是一个 IMAP/POP3/SMTP 代理服务器 。
 Nginx 是由 Igor Sysoev 为俄罗斯访问量第二的Rambler.ru 站点开发的，它已经在该站点运行超过四年多了。
Igor 将源代码以类BSD许可证的形式发布。自Nginx 发布四年来，Nginx 已经因为它的稳定性、丰富的功能集
、示例配置文件和低系统资源的消耗而闻名了。目前国内各大门户网站已经部署了Nginx，
如新浪、网易、腾讯等；国内几个重要的视频分享网站也部署了Nginx，如六房间、酷6等。
新近发现Nginx 技术在国内日趋火热，越来越多的网站开始部署Nginx。 
}}}
- from http://wiki.nginx.org/NginxChs

我们研究nginx的源代码的动机是为了完成分段反向代理项目的开发，由于分段反向代理的需求要求对web server的并发性很强，并且是给予http协议的基础上进行的， 所以我们选择了使用Nginx的模块的形式进行开发。

我们发现目前学习nginx的例子很少，主要是emiller的模块开发介绍这篇文章， 但是单独研究这篇文章发现很多晦涩难懂的地方，而目前还没有其他更好的文章来对这些地方做解释， 有些东西必须要通过源代码的研读才可以了解的更加清楚，所以我们决定开始进行代码研究计划，以便于更好的完成开发任务

根据目前的状况，我们决定使用最新的稳定版本进行研究，故而选择 0.7.61 版作为调研对象。

http://sysoev.ru/nginx/nginx-0.7.61.tar.gz




= 研究计划 =

下面是王晓哲帮助制定的调研计划

 * 学习emiller的文章
 * 熟悉nginx的基本数据结构 1w
 * 了解nginx的core module 的结构和运行机制， 同时参考 event 和 os module 的实现 1w
 * 了解nginx的http core module 的结构和运行机制 1w
 * 学习handler 类型module的编写 2d
 * 学习filter 类型module的编写 2d
 * upstream类型module的编写 1w

= 参与人员 =

徐景(rainx), 王晓哲(chaoslawful), 薛凯 (kaixue) , 候波林 (bolin)
 
= 研究文档 =

== 学习emiller的文章 ==

http://www.evanmiller.org/nginx-modules-guide.html

== 熟悉nginx的基本数据结构 ==

=== nginx 代码的目录结构 ===

解开nginx的代码后，在src目录下发现有如下的几个目录

{{{
core  event  http  mail  misc  os
}}}

其中 ：

 * *core* : 该目录存放core module的代码，也是nginx服务的入口
 * *http* : http core module 的代码，nginx作为web/http proxy server运行时的核心模块
 * *mail* : mail core module 的代码，nginx作为pop3/imap/smtp proxy server运行时的核心模块 ( 不在我们本次研究范围内 )
 * *event* : nginx 自身对事件处理逻辑的封装
 * *os* : nginx对各个平台抽象逻辑的封装
 * *misc* : nginx 的一些utils,定义了test和profiler的一些外围模块的逻辑


为了方便了解整个结构， 我们在src目录下建立了一个子目录，叫做demo,然后根据每个章节内容的不同，分别在demo下建立子目录，存放一些学习时使用的代码,如我们目前的章节是学习基本的数据类型，所以建立basic_types子目录

{{{
rainx@rainx-laptop:~/land/nginx-0.7.61/src$ mkdir -p demo/basic_types/
}}}
